(this["webpackJsonpreact-000"]=this["webpackJsonpreact-000"]||[]).push([[3],{286:function(t,e,s){t.exports={content:"ProfileInfo_content__2Io2G",contact:"ProfileInfo_contact__1N3gp",profileDataItem:"ProfileInfo_profileDataItem__3x0Tk",status:"ProfileInfo_status__2G3BZ",editSaveButton:"ProfileInfo_editSaveButton__mRSIN",column:"ProfileInfo_column__3f0g2",row:"ProfileInfo_row__3FU3B",avatar:"ProfileInfo_avatar__3xuFq"}},288:function(t,e,s){t.exports={postsBlock:"MyPosts_postsBlock__2ifKf",posts:"MyPosts_posts__3tZ1c"}},289:function(t,e,s){t.exports={item:"Post_item__ihtu9",avatar:"Post_avatar__1wBwP",likeBlock:"Post_likeBlock__3FDQI"}},292:function(t,e,s){"use strict";s.r(e);var a=s(4),c=s(32),n=s(33),o=s(36),i=s(34),r=s(1),l=s.n(r),j=s(35),u=s(286),b=s.n(u),d=s(65),f=s.p+"static/media/default_avatar.e1452621.jpg",O=s(0),p=function(t){var e=Object(r.useState)(!1),s=Object(j.a)(e,2),a=s[0],c=s[1],n=Object(r.useState)(t.status),o=Object(j.a)(n,2),i=o[0],l=o[1];Object(r.useEffect)((function(){l(t.status)}),[t.status]);return Object(O.jsxs)("div",{className:b.a.status,children:[Object(O.jsx)("div",{children:!a&&Object(O.jsxs)(O.Fragment,{children:[" ",Object(O.jsx)("b",{children:"Status: "})," ",Object(O.jsx)("span",{onDoubleClick:function(){t.isOwner&&c(!0)},children:i||"----"})," "]})}),Object(O.jsx)("div",{children:a&&Object(O.jsxs)(O.Fragment,{children:[" ",Object(O.jsx)("b",{children:"Status: "})," ",Object(O.jsx)("input",{onBlur:function(){c(!1),t.updateStatus(i)},autoFocus:!0,value:i,onChange:function(t){l(t.currentTarget.value)}})," "]})})]})},m=function(t){var e=t.title,s=t.value;return s?Object(O.jsxs)("div",{className:"".concat(b.a.contact," ").concat(b.a.profileDataItem),children:[Object(O.jsxs)("b",{children:[e,": "]})," ",s]}):""},h=function(t){var e=t.profile,s=t.goToEditMode,a=t.isOwner;return Object(O.jsxs)("div",{children:[Object(O.jsxs)("div",{className:b.a.profileDataItem,children:[Object(O.jsx)("b",{children:"Looking for a job: "}),e.lookingForAJob?"Yes":"No"]}),Object(O.jsxs)("div",{className:b.a.profileDataItem,children:[Object(O.jsx)("b",{children:"My skills: "})," ",e.lookingForAJobDescription]}),Object(O.jsxs)("div",{className:b.a.profileDataItem,children:[Object(O.jsx)("b",{children:"About me: "})," ",e.aboutMe]}),Object(O.jsxs)("div",{className:b.a.profileDataItem,children:[Object(O.jsx)("b",{children:"Contacts:"}),Object.keys(e.contacts).map((function(t){return Object(O.jsx)(m,{title:t,value:e.contacts[t]},t)}))]}),a&&Object(O.jsx)("div",{className:b.a.editSaveButton,children:Object(O.jsx)("button",{onClick:s,children:"Edit"})})]})},x=s(120),v=s(121),g=s(54),P=s(68),_=s(45),k=s.n(_),I=Object(P.a)(50),N=function(t){var e=t.title;return Object(O.jsxs)("div",{className:"".concat(b.a.contact," ").concat(b.a.profileDataItem),children:[e,":",Object(O.jsx)(x.a,{component:g.a,name:"contacts.".concat(e),validate:[I],placeholder:e})]})},S=Object(v.a)({form:"edit-profile"})((function(t){var e=t.profile,s=t.handleSubmit,a=t.error;return Object(O.jsxs)("form",{onSubmit:s,children:[Object(O.jsxs)("div",{className:b.a.profileDataItem,children:[Object(O.jsx)("b",{children:"Full name: "}),Object(O.jsx)(x.a,{component:g.a,name:"fullName",placeholder:"Full name",validate:[I]})]}),Object(O.jsxs)("div",{className:b.a.profileDataItem,children:[Object(O.jsx)("b",{children:"Looking for a job: "}),Object(O.jsx)(x.a,{component:g.a,name:"lookingForAJob",type:"checkbox"})]}),Object(O.jsxs)("div",{className:b.a.profileDataItem,children:[Object(O.jsx)("b",{children:"My skills: "}),Object(O.jsx)(x.a,{component:g.b,placeholder:"My skills",validate:[I],name:"lookingForAJobDescription"})]}),Object(O.jsxs)("div",{className:b.a.profileDataItem,children:[Object(O.jsx)("b",{children:"About Me: "}),Object(O.jsx)(x.a,{component:g.b,placeholder:"About me",validate:[I],name:"aboutMe"})]}),Object(O.jsxs)("div",{children:[Object(O.jsx)("b",{children:"Contacts:"}),Object.keys(e.contacts).map((function(t){return Object(O.jsx)(N,{title:t,value:e.contacts[t]},t)}))]}),a&&Object(O.jsx)("div",{className:k.a.formCommonError,children:a}),Object(O.jsx)("div",{className:b.a.editSaveButton,children:Object(O.jsx)("button",{type:"submit",children:"Save"})})]})})),w=function(t){var e=t.fullName;return Object(O.jsx)("div",{children:Object(O.jsx)("h2",{children:e})})},D=function(t){var e=t.profile,s=t.status,a=t.updateStatus,c=t.isOwner,n=t.savePhoto,o=t.saveProfileData,i=Object(r.useState)(!1),l=Object(j.a)(i,2),u=l[0],m=l[1];if(!e)return Object(O.jsx)(d.a,{});return Object(O.jsxs)("div",{className:b.a.content,children:[Object(O.jsx)(w,{fullName:e.fullName}),Object(O.jsx)(p,{status:s,isOwner:c,updateStatus:a}),Object(O.jsxs)("div",{className:b.a.row,children:[Object(O.jsxs)("div",{className:b.a.avatar+" "+b.a.column,children:[Object(O.jsx)("img",{alt:"",src:e.photos.large||f}),Object(O.jsx)("div",{children:c&&Object(O.jsx)("input",{type:"file",onChange:function(t){t.target.files.length>0&&n(t.target.files[0])}})})]}),Object(O.jsx)("div",{className:b.a.column,children:u?Object(O.jsx)(S,{initialValues:e,onSubmit:function(t){o(t).then((function(){m(!1)}))},profile:e}):Object(O.jsx)(h,{profile:e,goToEditMode:function(){m(!0)},isOwner:c})})]})]})},y=s(90),B=s(288),F=s.n(B),M=s(289),A=s.n(M),C=function(t){var e=t.message,s=t.likesCount;return Object(O.jsxs)("div",{className:A.a.item,children:[Object(O.jsxs)("div",{className:A.a.avatar,children:[Object(O.jsx)("img",{alt:"",src:"https://intim-mall.ru/images/thumbnails/1223/1000/detailed/250/154335.jpg"}),e]}),Object(O.jsxs)("div",{className:A.a.likeBlock,children:[Object(O.jsx)("img",{alt:"",src:"https://www.digitalbizmagazine.com/wp-content/uploads/2019/04/corazon.png"})," ",Object(O.jsx)("span",{children:s})]})]})},T=l.a.memo((function(t){var e=t.posts.map((function(t){return Object(O.jsx)(C,{message:t.message,likesCount:t.likesCount})}));return Object(O.jsxs)("div",{className:F.a.postsBlock,children:[Object(O.jsx)("h3",{children:" My Posts"}),Object(O.jsx)(E,{onSubmit:function(e){t.addPost(e.newPostBody)}}),Object(O.jsx)("div",{className:F.a.posts,children:e})]})})),U=Object(P.a)(10),E=Object(v.a)({form:"newPostForm"})((function(t){var e=t.handleSubmit;return Object(O.jsxs)("form",{onSubmit:e,children:[Object(O.jsx)("div",{children:Object(O.jsx)(x.a,{component:g.b,validate:[P.b,U],name:"newPostBody",placeholder:"Write your post"})}),Object(O.jsx)("div",{children:Object(O.jsx)("button",{children:"Add Post"})})]})})),J=T,z=s(12),G=Object(z.b)((function(t){return{posts:t.profilePage.posts,newPostText:t.profilePage.newPostText}}),{addPost:y.a})(J),L=function(t){var e=t.profile,s=t.status,a=t.updateStatus,c=t.isOwner,n=t.savePhoto,o=t.saveProfileData;return Object(O.jsxs)("div",{children:[Object(O.jsx)(D,{profile:e,status:s,isOwner:c,savePhoto:n,saveProfileData:o,updateStatus:a}),Object(O.jsx)(G,{})]})},Z=s(9),q=s(7),K=function(t){Object(o.a)(s,t);var e=Object(i.a)(s);function s(){return Object(c.a)(this,s),e.apply(this,arguments)}return Object(n.a)(s,[{key:"updateProfile",value:function(t){this.props.getProfile(t),this.props.getStatus(t)}},{key:"getUserId",value:function(t){var e=t.params.userId;return e||(e=t.authorizedUserId),e}},{key:"componentDidMount",value:function(){var t=this.getUserId(this.props);this.updateProfile(t)}},{key:"componentDidUpdate",value:function(t,e,s){var a=this.getUserId(t),c=this.getUserId(this.props);a!==c&&this.updateProfile(c)}},{key:"render",value:function(){return Object(O.jsx)(L,Object(a.a)(Object(a.a)({},this.props),{},{updateStatus:this.props.updateStatus,isOwner:!this.props.params.userId}))}}]),s}(l.a.Component);e.default=Object(Z.d)((function(t){return Object(z.b)((function(t){return{isAuth:t.auth.isAuth}}))((function(e){var s=Object(q.f)(),c=Object(q.g)();return Object(r.useEffect)((function(){e.isAuth||c.userId||s("/login")})),Object(O.jsx)(t,Object(a.a)({},e))}))}),(function(t){return function(e){var s=Object(q.e)(),c=Object(q.g)();return Object(O.jsx)(t,Object(a.a)({location:s,params:c},e))}}),Object(z.b)((function(t){return{posts:t.profilePage.posts,newPostText:t.profilePage.newPostText,profile:t.profilePage.profile,status:t.profilePage.status,authorizedUserId:t.auth.userId}}),{getProfile:y.c,getStatus:y.d,updateStatus:y.g,savePhoto:y.e,saveProfileData:y.f}))(K)}}]);
//# sourceMappingURL=3.fc200880.chunk.js.map